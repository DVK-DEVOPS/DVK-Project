services:
  whoknows:
    build:
      context: .
      dockerfile: Dockerfile.dev
    container_name: whoknows-go
    ports:
      - "8080:8080"
    volumes:
      - ./:/whoknows:cached
      - ./go/database.db:/whoknows/go/database.db
      - ${SSH_AUTH_SOCK:-/ssh-agent}:/ssh-agent
    working_dir: /whoknows/go
    environment:
      - SSH_AUTH_SOCK=/ssh-agent
    env_file:
      - ./go/.env
    command: go run main.go
    restart: unless-stopped